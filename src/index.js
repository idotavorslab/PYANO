console.group(`index.js`);
const path = require('path');
const fs = require('fs');
const { remote } = require('electron');
const Store = require("electron-store");
const store = new Store();
console.table({
    "process.platform": process.platform,
    __dirname,
    "store.path": store.path,
    "remote.app.getPath('userData')": remote.app.getPath('userData'),
});
console.log(`process.argv:\n\t${process.argv.join("\n\t")}`);
const pyShell = require("python-shell").PythonShell;
let rootPath;
if (__dirname.endsWith('src')) {
    rootPath = __dirname;
}
else {
    if (path.basename(__dirname).toLowerCase().includes('pyano')) {
        rootPath = path.join(__dirname, 'src');
    }
    else {
        alert(`bad __dirname: ${__dirname}`);
    }
}
const enginePath = path.join(rootPath, "engine");
const pyExecPath = path.join(enginePath, process.platform === 'win32' ? "env/Scripts/python.exe" : "env/bin/python");
console.table({ rootPath, enginePath, pyExecPath });
pyShell.defaultOptions = {
    pythonPath: pyExecPath,
    scriptPath: enginePath,
};
const configfilepath = path.join(remote.app.getPath('userData'), 'config.json');
let pythonDone = false;
if (fs.existsSync(path.join(enginePath, 'check_create_config_file.py'))) {
    try {
        console.log(`%crunning check_create_config_file.py, configfilepath: ${configfilepath}`, 'font-weight: 700');
        pyShell.run("check_create_config_file.py", {
            mode: "json",
            args: [configfilepath, rootPath]
        }, (err, output) => {
            if (err) {
                console.error(err);
            }
            else {
                console.group(`check_create_config_file.py output:`);
                output.map(console.log);
                console.groupEnd();
            }
            pythonDone = true;
        });
    }
    catch (e) {
        console.error('Error running check_create_config_file:', e);
    }
    finally {
        console.groupEnd();
    }
}
else {
    console.warn(`'check_create_config_file.py' does not exist, skipped check_create_config_file.py`);
}
if (fs.existsSync(store.path)) {
    console.group(`trying to get last page from store.path (${store.path})...`);
    let last_page = store.get('last_page');
    console.log('last_page: ', last_page);
    if (last_page === 'inside_test') {
        console.log('last page is inside_test, changing to new_test');
        store.set('last_page', 'new_test');
    }
    console.groupEnd();
}
else {
    alert(`store.path (${store.path}) does not exist! this shouldn't happen! see logs`);
}
for (let d of ['configs', 'subjects', 'truths']) {
    let subdir = path.join(rootPath, 'experiments', d);
    if (!fs.existsSync(subdir)) {
        fs.mkdirSync(subdir);
        console.warn(`created subdir: ${subdir}`);
    }
}
const { Sidebar } = require("./src/sidebar.js");
console.log(`Sidebar:`, Sidebar);
Sidebar.select(store.get('last_page'));
const pages = require("./src/pages/pages.js");
pages.toPage(store.get('last_page'));
console.log('index.js EOF');
console.groupEnd();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBRzFCLE1BQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUU3QixNQUFNLEVBQUUsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFNekIsTUFBTSxFQUFFLE1BQU0sRUFBRSxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUN2QyxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUN4QyxNQUFNLEtBQUssR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFDO0FBRTFCLE9BQU8sQ0FBQyxLQUFLLENBQUM7SUFDVixrQkFBa0IsRUFBRSxPQUFPLENBQUMsUUFBUTtJQUNwQyxTQUFTO0lBQ1QsWUFBWSxFQUFFLEtBQUssQ0FBQyxJQUFJO0lBQ3hCLGdDQUFnQyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQztDQUNuRSxDQUFDLENBQUM7QUFDSCxPQUFPLENBQUMsR0FBRyxDQUFDLG9CQUFvQixPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7QUFHN0QsTUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLFdBQVcsQ0FBQztBQUNwRCxJQUFJLFFBQVEsQ0FBQztBQUNiLElBQUksU0FBUyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsRUFBRTtJQUMzQixRQUFRLEdBQUcsU0FBUyxDQUFDO0NBQ3hCO0tBQU07SUFFSCxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1FBQzFELFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxLQUFLLENBQUMsQ0FBQTtLQUN6QztTQUFNO1FBQ0gsS0FBSyxDQUFDLGtCQUFrQixTQUFTLEVBQUUsQ0FBQyxDQUFBO0tBQ3ZDO0NBQ0o7QUFDRCxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxRQUFRLENBQUMsQ0FBQztBQUNqRCxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxPQUFPLENBQUMsUUFBUSxLQUFLLE9BQU8sQ0FBQyxDQUFDLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDckgsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFFLENBQUMsQ0FBQztBQUVwRCxPQUFPLENBQUMsY0FBYyxHQUFHO0lBQ3JCLFVBQVUsRUFBRSxVQUFVO0lBQ3RCLFVBQVUsRUFBRSxVQUFVO0NBQ3pCLENBQUM7QUFDRixNQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxFQUFFLGFBQWEsQ0FBQyxDQUFDO0FBQ2hGLElBQUksVUFBVSxHQUFHLEtBQUssQ0FBQztBQUN2QixJQUFJLEVBQUUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsNkJBQTZCLENBQUMsQ0FBQyxFQUFFO0lBQ3JFLElBQUk7UUFDQSxPQUFPLENBQUMsR0FBRyxDQUFDLDBEQUEwRCxjQUFjLEVBQUUsRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO1FBQzVHLE9BQU8sQ0FBQyxHQUFHLENBQUMsNkJBQTZCLEVBQUU7WUFDdkMsSUFBSSxFQUFFLE1BQU07WUFDWixJQUFJLEVBQUUsQ0FBQyxjQUFjLEVBQUUsUUFBUSxDQUFDO1NBQ25DLEVBQUUsQ0FBQyxHQUFHLEVBQUUsTUFBTSxFQUFFLEVBQUU7WUFDZixJQUFJLEdBQUcsRUFBRTtnQkFDTCxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQ3RCO2lCQUFNO2dCQUNILE9BQU8sQ0FBQyxLQUFLLENBQUMscUNBQXFDLENBQUMsQ0FBQztnQkFDckQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ3hCLE9BQU8sQ0FBQyxRQUFRLEVBQUUsQ0FBQzthQUN0QjtZQUNELFVBQVUsR0FBRyxJQUFJLENBQUM7UUFDdEIsQ0FBQyxDQUFDLENBQUM7S0FDTjtJQUFDLE9BQU8sQ0FBQyxFQUFFO1FBQ1IsT0FBTyxDQUFDLEtBQUssQ0FBQyx5Q0FBeUMsRUFBRSxDQUFDLENBQUMsQ0FBQztLQUMvRDtZQUFTO1FBQ04sT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDO0tBQ3RCO0NBQ0o7S0FBTTtJQUNILE9BQU8sQ0FBQyxJQUFJLENBQUMsbUZBQW1GLENBQUMsQ0FBQztDQUNyRztBQUNELElBQUksRUFBRSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7SUFDM0IsT0FBTyxDQUFDLEtBQUssQ0FBQyw0Q0FBNEMsS0FBSyxDQUFDLElBQUksTUFBTSxDQUFDLENBQUM7SUFDNUUsSUFBSSxTQUFTLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUN2QyxPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUN0QyxJQUFJLFNBQVMsS0FBSyxhQUFhLEVBQUU7UUFDN0IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxnREFBZ0QsQ0FBQyxDQUFDO1FBQzlELEtBQUssQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0tBQ3RDO0lBQ0QsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDO0NBQ3RCO0tBQU07SUFDSCxLQUFLLENBQUMsZUFBZSxLQUFLLENBQUMsSUFBSSxtREFBbUQsQ0FBQyxDQUFBO0NBQ3RGO0FBQ0QsS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxVQUFVLEVBQUUsUUFBUSxDQUFDLEVBQUU7SUFDN0MsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ25ELElBQUksQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1FBQ3hCLEVBQUUsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDckIsT0FBTyxDQUFDLElBQUksQ0FBQyxtQkFBbUIsTUFBTSxFQUFFLENBQUMsQ0FBQTtLQUM1QztDQUVKO0FBU0QsTUFBTSxFQUFFLE9BQU8sRUFBRSxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0FBQ2hELE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ2pDLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO0FBU3ZDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0FBRTlDLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO0FBRXJDLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLENBQUM7QUFDNUIsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiY29uc29sZS5ncm91cChgaW5kZXguanNgKTtcblxuXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuXG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5cblxuLy8gaW1wb3J0IHsgZGl2IH0gZnJvbSBcIi4vc3JjL2JoZVwiO1xuXG5cbmNvbnN0IHsgcmVtb3RlIH0gPSByZXF1aXJlKCdlbGVjdHJvbicpO1xuY29uc3QgU3RvcmUgPSByZXF1aXJlKFwiZWxlY3Ryb24tc3RvcmVcIik7XG5jb25zdCBzdG9yZSA9IG5ldyBTdG9yZSgpO1xuXG5jb25zb2xlLnRhYmxlKHtcbiAgICBcInByb2Nlc3MucGxhdGZvcm1cIjogcHJvY2Vzcy5wbGF0Zm9ybSxcbiAgICBfX2Rpcm5hbWUsXG4gICAgXCJzdG9yZS5wYXRoXCI6IHN0b3JlLnBhdGgsXG4gICAgXCJyZW1vdGUuYXBwLmdldFBhdGgoJ3VzZXJEYXRhJylcIjogcmVtb3RlLmFwcC5nZXRQYXRoKCd1c2VyRGF0YScpLFxufSk7XG5jb25zb2xlLmxvZyhgcHJvY2Vzcy5hcmd2OlxcblxcdCR7cHJvY2Vzcy5hcmd2LmpvaW4oXCJcXG5cXHRcIil9YCk7XG5cblxuY29uc3QgcHlTaGVsbCA9IHJlcXVpcmUoXCJweXRob24tc2hlbGxcIikuUHl0aG9uU2hlbGw7XG5sZXQgcm9vdFBhdGg7IC8vIFBZQU5PL3NyY1xuaWYgKF9fZGlybmFtZS5lbmRzV2l0aCgnc3JjJykpIHtcbiAgICByb290UGF0aCA9IF9fZGlybmFtZTtcbn0gZWxzZSB7XG5cbiAgICBpZiAocGF0aC5iYXNlbmFtZShfX2Rpcm5hbWUpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3B5YW5vJykpIHtcbiAgICAgICAgcm9vdFBhdGggPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAnc3JjJylcbiAgICB9IGVsc2Uge1xuICAgICAgICBhbGVydChgYmFkIF9fZGlybmFtZTogJHtfX2Rpcm5hbWV9YClcbiAgICB9XG59XG5jb25zdCBlbmdpbmVQYXRoID0gcGF0aC5qb2luKHJvb3RQYXRoLCBcImVuZ2luZVwiKTtcbmNvbnN0IHB5RXhlY1BhdGggPSBwYXRoLmpvaW4oZW5naW5lUGF0aCwgcHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ3dpbjMyJyA/IFwiZW52L1NjcmlwdHMvcHl0aG9uLmV4ZVwiIDogXCJlbnYvYmluL3B5dGhvblwiKTtcbmNvbnNvbGUudGFibGUoeyByb290UGF0aCwgZW5naW5lUGF0aCwgcHlFeGVjUGF0aCB9KTtcblxucHlTaGVsbC5kZWZhdWx0T3B0aW9ucyA9IHtcbiAgICBweXRob25QYXRoOiBweUV4ZWNQYXRoLFxuICAgIHNjcmlwdFBhdGg6IGVuZ2luZVBhdGgsXG59O1xuY29uc3QgY29uZmlnZmlsZXBhdGggPSBwYXRoLmpvaW4ocmVtb3RlLmFwcC5nZXRQYXRoKCd1c2VyRGF0YScpLCAnY29uZmlnLmpzb24nKTtcbmxldCBweXRob25Eb25lID0gZmFsc2U7XG5pZiAoZnMuZXhpc3RzU3luYyhwYXRoLmpvaW4oZW5naW5lUGF0aCwgJ2NoZWNrX2NyZWF0ZV9jb25maWdfZmlsZS5weScpKSkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGAlY3J1bm5pbmcgY2hlY2tfY3JlYXRlX2NvbmZpZ19maWxlLnB5LCBjb25maWdmaWxlcGF0aDogJHtjb25maWdmaWxlcGF0aH1gLCAnZm9udC13ZWlnaHQ6IDcwMCcpO1xuICAgICAgICBweVNoZWxsLnJ1bihcImNoZWNrX2NyZWF0ZV9jb25maWdfZmlsZS5weVwiLCB7XG4gICAgICAgICAgICBtb2RlOiBcImpzb25cIixcbiAgICAgICAgICAgIGFyZ3M6IFtjb25maWdmaWxlcGF0aCwgcm9vdFBhdGhdXG4gICAgICAgIH0sIChlcnIsIG91dHB1dCkgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5ncm91cChgY2hlY2tfY3JlYXRlX2NvbmZpZ19maWxlLnB5IG91dHB1dDpgKTtcbiAgICAgICAgICAgICAgICBvdXRwdXQubWFwKGNvbnNvbGUubG9nKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmdyb3VwRW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBweXRob25Eb25lID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBydW5uaW5nIGNoZWNrX2NyZWF0ZV9jb25maWdfZmlsZTonLCBlKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgICBjb25zb2xlLmdyb3VwRW5kKCk7XG4gICAgfVxufSBlbHNlIHtcbiAgICBjb25zb2xlLndhcm4oYCdjaGVja19jcmVhdGVfY29uZmlnX2ZpbGUucHknIGRvZXMgbm90IGV4aXN0LCBza2lwcGVkIGNoZWNrX2NyZWF0ZV9jb25maWdfZmlsZS5weWApO1xufVxuaWYgKGZzLmV4aXN0c1N5bmMoc3RvcmUucGF0aCkpIHtcbiAgICBjb25zb2xlLmdyb3VwKGB0cnlpbmcgdG8gZ2V0IGxhc3QgcGFnZSBmcm9tIHN0b3JlLnBhdGggKCR7c3RvcmUucGF0aH0pLi4uYCk7XG4gICAgbGV0IGxhc3RfcGFnZSA9IHN0b3JlLmdldCgnbGFzdF9wYWdlJyk7XG4gICAgY29uc29sZS5sb2coJ2xhc3RfcGFnZTogJywgbGFzdF9wYWdlKTtcbiAgICBpZiAobGFzdF9wYWdlID09PSAnaW5zaWRlX3Rlc3QnKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdsYXN0IHBhZ2UgaXMgaW5zaWRlX3Rlc3QsIGNoYW5naW5nIHRvIG5ld190ZXN0Jyk7XG4gICAgICAgIHN0b3JlLnNldCgnbGFzdF9wYWdlJywgJ25ld190ZXN0Jyk7XG4gICAgfVxuICAgIGNvbnNvbGUuZ3JvdXBFbmQoKTtcbn0gZWxzZSB7XG4gICAgYWxlcnQoYHN0b3JlLnBhdGggKCR7c3RvcmUucGF0aH0pIGRvZXMgbm90IGV4aXN0ISB0aGlzIHNob3VsZG4ndCBoYXBwZW4hIHNlZSBsb2dzYClcbn1cbmZvciAobGV0IGQgb2YgWydjb25maWdzJywgJ3N1YmplY3RzJywgJ3RydXRocyddKSB7XG4gICAgbGV0IHN1YmRpciA9IHBhdGguam9pbihyb290UGF0aCwgJ2V4cGVyaW1lbnRzJywgZCk7XG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKHN1YmRpcikpIHtcbiAgICAgICAgZnMubWtkaXJTeW5jKHN1YmRpcik7XG4gICAgICAgIGNvbnNvbGUud2FybihgY3JlYXRlZCBzdWJkaXI6ICR7c3ViZGlyfWApXG4gICAgfVxuXG59XG5cblxuLyokU2lkZWJhci5fZmFkZVRvID0gJFNpZGViYXIuZmFkZVRvO1xuJFNpZGViYXIuZmFkZVRvID0gKHNwZWVkLCB0bywgZWFzaW5nLCBjYWxsYmFjaykgPT4ge1xuICAgIC8vIFsuLi4kU2lkZWJhclswXS5jaGlsZHJlbl0uZm9yRWFjaChpdGVtPT5pdGVtLmNsYXNzTGlzdC5hZGQoJ3VuY2xpY2thYmxlJykpO1xuICAgICRTaWRlYmFyWzBdLmNsYXNzTGlzdC50b2dnbGUoJ3VuY2xpY2thYmxlJywgdG8gPT0gMCk7XG4gICAgcmV0dXJuICRTaWRlYmFyLl9mYWRlVG8oc3BlZWQsIHRvLCBlYXNpbmcsIGNhbGxiYWNrKTtcbn07Ki9cbmNvbnN0IHsgU2lkZWJhciB9ID0gcmVxdWlyZShcIi4vc3JjL3NpZGViYXIuanNcIik7XG5jb25zb2xlLmxvZyhgU2lkZWJhcjpgLCBTaWRlYmFyKTtcblNpZGViYXIuc2VsZWN0KHN0b3JlLmdldCgnbGFzdF9wYWdlJykpO1xuXG4vKmZ1bmN0aW9uIHNhZmVTd2l0Y2hDc3MoaHJlZikge1xuICAgIGlmICgkUGFnZUNzcy5hdHRyKCdocmVmJykgIT0gaHJlZikge1xuICAgICAgICAkUGFnZUNzcy5hdHRyKCdocmVmJywgaHJlZik7XG4gICAgfVxufSovXG5cbi8vIHNpZGViYXIuYnVpbGQoKTtcbmNvbnN0IHBhZ2VzID0gcmVxdWlyZShcIi4vc3JjL3BhZ2VzL3BhZ2VzLmpzXCIpO1xuXG5wYWdlcy50b1BhZ2Uoc3RvcmUuZ2V0KCdsYXN0X3BhZ2UnKSk7XG5cbmNvbnNvbGUubG9nKCdpbmRleC5qcyBFT0YnKTtcbmNvbnNvbGUuZ3JvdXBFbmQoKTtcbiJdfQ==