<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Pyano</title>

    <script type="text/javascript" defer>

		 console.log('index.html extendPrimitivePrototypes()');
		 Object.defineProperty(Object.prototype, "isEmpty", {
			 enumerable: false,
			 value() {
				 return Object.keys(this).length == 0;
			 }
		 },);
		 Object.defineProperty(Object.prototype, "items", {
			 enumerable: false,
			 value() {
				 return Object.entries(this);
			 }
		 });
		 Object.defineProperty(Object.prototype, "keys", {
			 enumerable: false,
			 value() {
				 return Object.keys(this);
			 }
		 });
		 Object.defineProperty(Array.prototype, "last", {
			 enumerable: false,
			 value() {
				 return this[this.length - 1];
			 }
		 },);
		 Object.defineProperty(Array.prototype, "lowerAll", {
			 enumerable: false,
			 value() {
				 return this.map(s => s.lower());
			 }
		 },);
		 Object.defineProperty(Array.prototype, "rsort", {
			 enumerable: false,
			 value() {
				 return this.sort((n, m) => n < m);
			 }
		 },);
		 Object.defineProperty(Array.prototype, "count", {
			 enumerable: false,
			 value(item, strict = false) {
				 let _count = 0;
				 for (let x of this) {
					 if (strict) {
						 if (x === item)
							 _count++;

					 } else if (x == item) {
						 _count++;
					 }
				 }
				 return _count;

			 }

		 },);
		 /**@param {string} searchString
		  * @param {boolean} [fromEnd=false]
		  * @return {string}*/
		 String.prototype.upTo = (searchString, fromEnd = false) => {
			 let end = fromEnd
			           ? this.lastIndexOf(searchString)
			           : this.indexOf(searchString);
			 return this.slice(0, end);
		 };

		 /*Object.defineProperty(String.prototype, "upTo", {
			 enumerable: false,
			 value(searchString, fromEnd = false) {
				 let end = fromEnd
				           ? this.lastIndexOf(searchString)
				           : this.indexOf(searchString);
				 return this.slice(0, end);
			 }
		 },);
		 */
		 Object.defineProperty(String.prototype, "in", {
			 enumerable: false,
			 value(arr) {
				 return arr.includes(this.valueOf());
			 }
		 },);
		 Object.defineProperty(String.prototype, "lower", {
			 enumerable: false,
			 value() {
				 return this.toLowerCase();
			 }
		 },);
		 Object.defineProperty(String.prototype, "upper", {
			 enumerable: false,
			 value() {
				 return this.toUpperCase();
			 }
		 },);
		 Object.defineProperty(String.prototype, "title", {
			 enumerable: false,
			 value() {

				 if (this.includes(' '))
					 return this.split(' ').map(str => str.title()).join(' ');
				 else
					 return this[0].upper() + this.slice(1, this.length).lower();

			 }
		 },);
		 Object.defineProperty(String.prototype, "isdigit", {
			 enumerable: false,
			 value() {
				 return !isNaN(Math.floor(this));
			 }
		 },);
		 Object.defineProperty(String.prototype, "replaceAll", {
			 enumerable: false,
			 value(searchValue, replaceValue) {
				 return this
					 .split(searchValue)
					 .join(replaceValue);
			 }
		 });
		 Object.defineProperty(Number.prototype, "idx2human", {
			 enumerable: false,
			 value(letters = false) {
				 switch (Math.floor(this) + 1) {
					 case 0:
						 return letters
						        ? "zeroth"
						        : "0th";
					 case 1:
						 return letters
						        ? "first"
						        : "1st";
					 case 2:
						 return letters
						        ? "second"
						        : "2nd";
					 case 3:
						 return letters
						        ? "third"
						        : "3rd";
					 case 4:
						 return letters
						        ? "fourth"
						        : "4th";
					 case 5:
						 return letters
						        ? "fifth"
						        : "5th";
					 case 6:
						 return letters
						        ? "sixth"
						        : "6th";
					 case 7:
						 return letters
						        ? "seventh"
						        : "7th";
					 case 8:
						 return letters
						        ? "eighth"
						        : "8th";
					 case 9:
						 return letters
						        ? "ninth"
						        : "9th";

					 default:
						 return `${this}th`;
				 }

			 }
		 });
		 const { Alert } = require('pyano_local_modules/util/Alert');
		 const small = (...args) => [`%c${args.join(' ')}`, `font-size:10px`];
		 const any = (...items) => items.some(item => bool(item));
		 const all = (...items) => items.every(item => bool(item));
		 /**@param {*} val
		  * @return {boolean}*/
		 const bool = (val) =>
			 (val instanceof Object)
			 ? val.isEmpty()
			   ? typeof val == 'function'
			   : true
			 : !!val;

		 const fsx = (() => {
			 const fs = require("fs");
			 const path = require("path");
			 /**@param {PathLike|string} pathLike
			  * @param {number | string | MakeDirectoryOptions | undefined | null} options
			  * @return {Promise<boolean>}*/
			 const mkdir = (pathLike, options) => new Promise(resolve =>
				 fs.mkdir(pathLike, options, err => resolve(!bool(err))));

			 /**@param {PathLike|string} pathLike
			  * @return {Promise<boolean>}*/
			 const path_exists = pathLike => new Promise(resolve =>
				 fs.access(pathLike, fs.constants.F_OK, err => resolve(!bool(err))));

			 /**
			  {@link remove_ext Uses remove_ext}
			  @param {PathLike|string} pathLike
			  @param {string} ext - Target extension without dot
			  @return {string}*/
			 const replace_ext = (pathLike, ext) => {
				 if (ext.includes('.'))
					 throw new Error(`ext included dot ".", ext: ${ext}`);
				 return `${remove_ext(pathLike)}.${ext}`;
			 };

			 /**
			  * @param {PathLike|string} pathLike
			  * @return {string}
			  * @example
			  * remove_ext("experiments/truths/fur_elise_B.txt")
			  * >>> experiments/truths/fur_elise_B
			  * remove_ext("fur_elise_B.txt")
			  * >>> fur_elise_B */
			 const remove_ext = pathLike => path.join(path.dirname(pathLike), path.basename(pathLike, path.extname(pathLike)));

			 /**
			  * {@link remove_ext Uses remove_ext}
			  * @param {PathLike|string} pathLike
			  * @param {string|number} push
			  * @return {string}
			  * */
			 const push_before_ext = (pathLike, push) => {
				 let ext = path.extname(pathLike);
				 return `${remove_ext(pathLike)}${push}${ext}`;
			 };

			 /**@param {string|PathLike} pathLike
			  * @param {?string} ext*/
			 function basename(pathLike, ext = null) {
				 if (!ext)
					 return path.basename(pathLike);
				 return path.basename(pathLike, ext);
			 }

			 /**@param {...string} paths
			  * @return {string[]}
			  * */
			 function basenames(...paths) {
				 return [...paths.map(p => path.basename(p))];
			 }

			 /** @type {{
			  * basename:(function(string|PathLike,?string):string),
			  * basenames:(function(...string|PathLike):string[]),
			  * path_exists: (function((PathLike|string)): Promise<boolean>),
			  * push_before_ext: (function((PathLike|string), (string|number)): string),
			  * remove_ext: (function((PathLike|string)): string),
			  * mkdir: (function((PathLike|string), (number|string|MakeDirectoryOptions|undefined|null)): Promise<boolean>),
			  * replace_ext: (function((PathLike|string), string): string)}}*/
			 const newVar = { basenames, basename, mkdir, path_exists, replace_ext, remove_ext, push_before_ext };
			 return newVar;
		 })();
		 const asx = (() => {
			 /**@param {number} ms
			  * @return {Promise}*/
			 async function wait(ms) {
				 return new Promise(resolve => setTimeout(resolve, ms));
			 }

			 /**@param {jQuery} jQuery
			  @param {number} ms
			  @return {Promise<jQuery>}*/
			 const $fadeOut = (jQuery, ms) => new Promise(resolve => jQuery.fadeTo(ms, 0, resolve));

			 /**@param {jQuery} jQuery
			  @param {number} ms
			  @reutrn {Promise<jQuery>}*/
			 const $fadeIn = (jQuery, ms) => new Promise(resolve => jQuery.fadeTo(ms, 1, resolve));

			 /**@param {number} ms
			  @param {...jQuery} jQueries
			  @return {Promise<jQuery[]>}*/
			 async function $fadeInMany(ms, ...jQueries) {
				 let promises = [];
				 for (let jQ of jQueries)
					 promises.push($fadeIn(jQ, ms));

				 return await Promise.all(promises);
			 }

			 /**@param {number} ms
			  @param {...jQuery} jQueries
			  @return {Promise<jQuery[]>}*/
			 async function $fadeOutMany(ms, ...jQueries) {
				 let promises = [];
				 for (let jQ of jQueries)
					 promises.push($fadeOut(jQ, ms));

				 return await Promise.all(promises);
			 }

			 /**@template T
			  * @param {...function():T|void} fns
			  * @return {Promise<T[]>}*/
			 async function concurrent(...fns) {
				 return await Promise.all(fns);
			 }

			 /**@type {
			  *     {
			  *         $fadeIn: (function(jQuery, number): Promise<jQuery>),
			  *         $fadeInMany: (function(number, ...jQuery): jQuery[]),
			  *         $fadeOut: (function(jQuery, number): Promise<jQuery>),
			  *         $fadeOutMany: (function(number, ...jQuery): jQuery[]),
			  *         concurrent: (function(...function(): T): T[])
			  *         wait: (function(number): Promise<*>),
			  *     }
			  * }
			  * @template T*/
			 const newVar = {
				 $fadeIn,
				 $fadeOut,
				 $fadeOutMany,
				 $fadeInMany,
				 concurrent,
				 wait,
			 };
			 return newVar;
		 })();


    </script>
    <script src="jquery.js" defer></script>
    <link rel="stylesheet" href="animate.min.css">
    <link rel="stylesheet" href="templates/css/index.css">
    <link id="page_css" rel="stylesheet" href="templates/css/new_test.css">
    <script src="templates/js/types.js" defer></script>
    <script src="templates/js/init.js" defer></script>


</head>
<body>

<div id="title"></div>
<div id="sidebar"></div>
<div id="main_content"></div>
</body>
</html>
