// **pages/NewTest/PyFns.js
let { Python, EStore } = require("pyano_local_modules/ext_libs");



function check_create_new_subject(subjectIdInputVal) {

	// Set new subject in Estore/subjects if new; else nothing
	const subjectsDirPath = EStore.subjectsDirPath();
	let pyoptions = {
		args: [subjectIdInputVal, subjectsDirPath]
	};
	Python.run("NewTest/check_create_new_subject.py", pyoptions, (err, response) => {
		if (err) throw err;
		// noinspection JSCheckFunctionSignatures
		response = JSON.parse(response);
		let subjectPath = Path.join(subjectsDirPath, subjectIdInputVal);

		if (response == "created") {
			Alert.small.info(`New subject created: ${subjectIdInputVal}`, subjectPath);

		} else if (response == "exists") {
			Alert.small.success(`Using existing subject: ${subjectIdInputVal}`, subjectPath);
		}


	});

}

module.exports = { check_create_new_subject };
